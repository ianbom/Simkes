import{r as d,u as S,j as e}from"./app--DbWyvYo.js";import{c as U}from"./createLucideIcon-DALsoLZg.js";import{X as x}from"./utils-BH-IZkB_.js";import{C as z}from"./camera-Cie0Vlvg.js";import{S as C}from"./save-BuMZXXyJ.js";import{H}from"./heart-Dqu4yYpp.js";import{P as G}from"./PasienLayout-BmxQY9cU.js";/* empty css            */import"./Combination-D1vz9WED.js";import"./index-Dd8HQuYF.js";import"./index-DOYfHXxP.js";import"./index-8DUkt3Ss.js";import"./index-DUwMuHpD.js";import"./chevron-down-CsDtTj4O.js";import"./users-CUdPABi-.js";import"./heart-pulse-Dy_JxzPg.js";import"./baby-DuAJb-us.js";import"./log-out-Bzm0h9Q4.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],O=U("circle-check-big",J);function W({user:r,provinsi:g,kota:p,kecamatan:h,flash:n,riwayatMedis:c}){const[y,b]=d.useState(null),[P,_]=d.useState([]),[M,k]=d.useState([]),[K,f]=d.useState(!1),{data:t,setData:i,post:D,processing:j,errors:s,isDirty:R,reset:L}=S({name:r?.name||"",email:r?.email||"",nik:r?.nik||"",tanggal_lahir:r?.tanggal_lahir||"",kelamin:r?.kelamin||"L",no_telp:r?.no_telp||"",alamat:r?.alamat||"",provinsi_id:r?.provinsi_id?.toString()||"",kota_id:r?.kota_id?.toString()||"",kecamatan_id:r?.kecamatan_id?.toString()||"",faskes_id:r?.faskes_id?.toString()||"",profile_pic_url:null}),{data:m,setData:u,post:A,processing:v,errors:o,isDirty:w,reset:q}=S({golongan_darah:c?.golongan_darah||"",rhesus:c?.rhesus||"",jumlah_keguguran:c?.jumlah_keguguran?.toString()||"0",riwayat_alergi:c?.riwayat_alergi||""});d.useEffect(()=>{if(t.provinsi_id){const a=p.filter(l=>l.provinsi_id.toString()===t.provinsi_id);_(a),a.find(l=>l.id.toString()===t.kota_id)||i(l=>({...l,kota_id:"",kecamatan_id:""}))}else _([])},[t.provinsi_id]),d.useEffect(()=>{if(t.kota_id){const a=h.filter(l=>l.kota_id.toString()===t.kota_id);k(a),a.find(l=>l.id.toString()===t.kecamatan_id)||i("kecamatan_id","")}else k([])},[t.kota_id]),d.useEffect(()=>{if(n?.success){f(!0);const a=setTimeout(()=>{f(!1)},5e3);return()=>clearTimeout(a)}},[n?.success]);const B=a=>{const l=a.target.files?.[0];if(l){if(l.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}if(!l.type.startsWith("image/")){alert("File harus berupa gambar");return}i("profile_pic_url",l);const N=new FileReader;N.onloadend=()=>{b(N.result)},N.readAsDataURL(l)}},E=a=>{a.preventDefault(),D(route("pasien.updateProfile"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{b(null),L("profile_pic_url")},onError:l=>{console.error("Update profile errors:",l)}})},F=a=>{a.preventDefault(),A(route("pasien.updateRiwayatMedis"),{preserveScroll:!0,onSuccess:()=>{console.log("Riwayat medis berhasil diperbarui")},onError:l=>{console.error("Update riwayat medis errors:",l)}})},T=()=>{b(null),i({name:r?.name||"",email:r?.email||"",nik:r?.nik||"",tanggal_lahir:r?.tanggal_lahir||"",kelamin:r?.kelamin||"L",no_telp:r?.no_telp||"",alamat:r?.alamat||"",provinsi_id:r?.provinsi_id?.toString()||"",kota_id:r?.kota_id?.toString()||"",kecamatan_id:r?.kecamatan_id?.toString()||"",faskes_id:r?.faskes_id?.toString()||"",profile_pic_url:null})},I=()=>{q()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-50 p-8",children:e.jsxs("div",{className:"relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[K&&n?.success&&e.jsxs("div",{className:"mb-6 rounded-lg bg-green-50 border border-green-200 p-4 flex items-center gap-3",children:[e.jsx(O,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-800",children:n.success}),e.jsx("button",{onClick:()=>f(!1),className:"ml-auto text-green-600 hover:text-green-800",children:e.jsx(x,{className:"h-4 w-4"})})]}),n?.error&&e.jsxs("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 p-4 flex items-center gap-3",children:[e.jsx(x,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:n.error})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-8 text-white",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Profil Saya"}),e.jsx("p",{className:"mt-2 text-blue-100",children:"Kelola informasi profil Anda"})]}),e.jsx("form",{onSubmit:E,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 w-32 overflow-hidden rounded-full border-4 border-white bg-gray-200 shadow-lg",children:y||r?.profile_pic_url?e.jsx("img",{src:y||`/storage/${r?.profile_pic_url}`,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-blue-100 text-4xl font-bold text-blue-600",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("label",{htmlFor:"profile-upload",className:"absolute bottom-0 right-0 cursor-pointer rounded-full bg-blue-500 p-2 text-white shadow-lg transition-colors hover:bg-blue-600",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("input",{id:"profile-upload",type:"file",accept:"image/*",className:"hidden",onChange:B})]})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Klik ikon kamera untuk mengubah foto profil (Max 2MB)"}),s.profile_pic_url&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.profile_pic_url})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Lengkap"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:a=>i("name",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["NIK"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"nik",value:t.nik,onChange:a=>i("nik",a.target.value),maxLength:16,className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0}),s.nik&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.nik})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Email"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:a=>i("email",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tanggal Lahir"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"tanggal_lahir",value:t.tanggal_lahir,onChange:a=>i("tanggal_lahir",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0}),s.tanggal_lahir&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.tanggal_lahir})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jenis Kelamin"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"kelamin",value:t.kelamin,onChange:a=>i("kelamin",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]}),s.kelamin&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.kelamin})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["No. Telepon"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"no_telp",value:t.no_telp,onChange:a=>i("no_telp",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0}),s.no_telp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.no_telp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Faskes Terdaftar"}),e.jsx("input",{type:"text",value:r?.faskes?.nama_faskes||"-",className:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2",disabled:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Hubungi admin untuk mengubah faskes"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Provinsi"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"provinsi_id",value:t.provinsi_id,onChange:a=>i("provinsi_id",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Provinsi"}),g.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),s.provinsi_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.provinsi_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Kota/Kabupaten"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"kota_id",value:t.kota_id,onChange:a=>i("kota_id",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",disabled:!t.provinsi_id,required:!0,children:[e.jsx("option",{value:"",children:"Pilih Kota"}),P.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),s.kota_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.kota_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Kecamatan"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"kecamatan_id",value:t.kecamatan_id,onChange:a=>i("kecamatan_id",a.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",disabled:!t.kota_id,required:!0,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),M.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),s.kecamatan_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.kecamatan_id})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Alamat Lengkap"}),e.jsx("textarea",{name:"alamat",value:t.alamat,onChange:a=>i("alamat",a.target.value),rows:3,className:"w-full resize-none rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan alamat lengkap Anda"}),s.alamat&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.alamat})]})]}),R&&e.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[e.jsxs("button",{type:"button",onClick:T,disabled:j,className:"flex items-center gap-2 rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50 disabled:opacity-50",children:[e.jsx(x,{className:"h-4 w-4"}),"Batal"]}),e.jsxs("button",{type:"submit",disabled:j,className:"flex items-center gap-2 rounded-lg bg-blue-500 px-6 py-2 text-white transition-colors hover:bg-blue-600 disabled:opacity-50",children:[e.jsx(C,{className:"h-4 w-4"}),j?"Menyimpan...":"Simpan Perubahan"]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"h-6 w-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Riwayat Medis"})]})}),e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Golongan Darah"}),e.jsxs("select",{value:m.golongan_darah,onChange:a=>u("golongan_darah",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Pilih Golongan Darah"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"AB",children:"AB"}),e.jsx("option",{value:"O",children:"O"})]}),o.golongan_darah&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.golongan_darah})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rhesus"}),e.jsxs("select",{value:m.rhesus,onChange:a=>u("rhesus",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Pilih Rhesus"}),e.jsx("option",{value:"+",children:"Positif (+)"}),e.jsx("option",{value:"-",children:"Negatif (-)"})]}),o.rhesus&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.rhesus})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jumlah Keguguran"}),e.jsx("input",{type:"number",min:"0",value:m.jumlah_keguguran,onChange:a=>u("jumlah_keguguran",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"0"}),o.jumlah_keguguran&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.jumlah_keguguran})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Riwayat Alergi"}),e.jsx("textarea",{value:m.riwayat_alergi,onChange:a=>u("riwayat_alergi",a.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Tuliskan riwayat alergi jika ada..."}),o.riwayat_alergi&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.riwayat_alergi})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:I,disabled:v||!w,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:"Batal"})]})}),e.jsx("button",{type:"submit",disabled:v||!w,className:"px-6 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg hover:from-red-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:v?"Menyimpan...":"Simpan Riwayat Medis"})]})})]})]})]})]})})}function ue({user:r,provinsi:g,kota:p,kecamatan:h,riwayatMedis:n}){return console.log(r),e.jsx(G,{currentPage:"dashboard",user:r,children:e.jsx(W,{user:r,provinsi:g,kota:p,kecamatan:h,riwayatMedis:n})})}export{ue as default};
