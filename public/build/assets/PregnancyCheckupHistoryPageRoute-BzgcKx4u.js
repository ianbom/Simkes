import{r as d,j as e}from"./app-DVAV-TGf.js";import{B as x}from"./badge-CTccWDK4.js";import{B as h}from"./button-4R4MV2AX.js";import{C as o,a as g,b as J,c as $}from"./card-Db6LBYBq.js";import{I as K}from"./input-LKyOJvLl.js";import{S as U,a as z,b as H,c as M,d as N,C as S}from"./select-DEMw5pec.js";import{C as T}from"./clipboard-list-CApg0Lv0.js";import{A as E}from"./activity-BRyv8dCd.js";import{S as q,R as V}from"./sliders-horizontal-CcjdBkSJ.js";import{C as b}from"./calendar-sOmlXuIN.js";import{C as Q}from"./circle-alert-Brdm3WCt.js";import{T as O,F as W}from"./triangle-alert-DgJHOK0_.js";import{U as Y}from"./utils-gt38yA7v.js";import{C as G}from"./chevron-down-BPqhxQSe.js";import{I as L}from"./image-6CYkD1R2.js";import{F as X}from"./file-text-CfVjAf45.js";import{P as Z}from"./PetugasLayout-CPqymxsL.js";/* empty css            */import"./index-DeXj-Kjv.js";import"./index-BdQq_4o_.js";import"./Combination-DFkMMEeZ.js";import"./index-BBFquk-Z.js";import"./createLucideIcon-CXjRWg5O.js";import"./log-out-BeM1kc6d.js";import"./Navigation-CJXz8Fo2.js";const ee=({checkupHistory:l})=>{const[i,k]=d.useState(""),[r,y]=d.useState("all"),[p,P]=d.useState(new Set),[u,v]=d.useState(!1),w=10,n=d.useMemo(()=>l?l.filter(a=>{const s=r==="all"?!0:a.jenis_pemeriksaan?.toLowerCase()===r,t=`
                ${a.kehamilan?.user?.name||""}
                ${a.keluhan||""}
                ${a.catatan_petugas||""}
                ${a.petugas?.faskes?.nama||""}
                ${a.deteksi_resiko||""}
            `.toLowerCase(),m=i.trim()===""||t.includes(i.toLowerCase());return s&&m}):[],[l,r,i]),_=u?n:n.slice(0,w),C=n.length>w;if(!l||l.length===0)return e.jsxs("div",{className:"px-4 py-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"font-heading text-2xl font-bold",children:"Riwayat Checkup Kehamilan"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Catatan lengkap pemeriksaan kehamilan pasien Anda"})]}),e.jsx(o,{className:"bg-white shadow-sm",children:e.jsxs(g,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(T,{className:"mb-3 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Tidak ada data pemeriksaan"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Belum ada riwayat pemeriksaan kehamilan"})]})})]});const D=()=>{k(""),y("all")},B=a=>{const s=new Set(p);s.has(a)?s.delete(a):s.add(a),P(s)},j=i.trim()||r!=="all",F=a=>a.toLowerCase()==="rutin"?"bg-green-100 text-green-700 hover:bg-green-100":"bg-red-100 text-red-700 hover:bg-red-100",I=a=>a.toLowerCase()==="rutin"?"Pemeriksaan Rutin":"Pemeriksaan Sakit",c=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),f=a=>new Date(a).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=a=>!a||a==="Tidak Ada"?"bg-green-100 text-green-700":a==="Ringan"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700";return e.jsxs("div",{className:"px-4 py-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-bold",children:"Riwayat Checkup Kehamilan"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Catatan lengkap pemeriksaan kehamilan pasien Anda"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md bg-purple-100 px-3 py-1 text-sm font-semibold text-purple-800",children:[e.jsx(E,{className:"h-4 w-4 text-purple-600"}),"Total: ",l?.length||0]})})]}),e.jsxs(o,{className:"mb-6 bg-white shadow-sm",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center justify-between gap-4 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:"mr-2 text-blue-600"}),"Filter Pemeriksaan"]}),j&&e.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-1 text-xs text-emerald-600",children:"Aktif"})]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:D,disabled:!j,children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Reset Filter"]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Jenis Pemeriksaan"}),e.jsxs(U,{value:r,onValueChange:y,children:[e.jsx(z,{children:e.jsx(H,{placeholder:"Semua Pemeriksaan"})}),e.jsxs(M,{className:"bg-white",children:[e.jsx(N,{value:"all",children:"Semua Pemeriksaan"}),e.jsx(N,{value:"rutin",children:"Pemeriksaan Rutin"}),e.jsx(N,{value:"sakit",children:"Pemeriksaan Sakit"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Pencarian"}),e.jsx(K,{type:"text",placeholder:"Cari pasien, keluhan, catatan...",value:i,onChange:a=>k(a.target.value)})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[_.map(a=>e.jsx(o,{className:"bg-white shadow-sm transition-shadow hover:shadow-md",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(x,{className:F(a.jenis_pemeriksaan),children:I(a.jenis_pemeriksaan)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"}),c(a.tanggal_checkup)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 rounded-xl border border-gray-200 bg-gradient-to-br from-blue-50 to-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pemeriksaan ANC"}),a.kehamilan_id&&e.jsxs("span",{className:"mt-1 inline-block text-xs font-medium text-gray-500",children:["ID Kehamilan: #",a.kehamilan_id]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-white/80 px-3 py-2",children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0 text-blue-600"}),e.jsxs("div",{className:"flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"HPHT"}),e.jsx("span",{className:"truncate text-sm font-semibold text-gray-900",children:a.kehamilan?.hpht?c(a.kehamilan.hpht):"Belum ada data"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-white/80 px-3 py-2",children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0 text-green-600"}),e.jsxs("div",{className:"flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"HPL"}),e.jsx("span",{className:"truncate text-sm font-semibold text-gray-900",children:a.kehamilan?.hpl?c(a.kehamilan.hpl):"Belum ada data"})]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[a.keluhan&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-red-200 bg-red-50 p-3",children:[e.jsx(Q,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-red-900",children:"Keluhan Pasien"}),e.jsx("p",{className:"text-sm text-red-700",children:a.keluhan})]})]}),a.deteksi_resiko&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-orange-200 bg-orange-50 p-3",children:[e.jsx(O,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-900",children:"Deteksi Risiko"}),e.jsx("p",{className:"text-sm text-orange-700",children:a.deteksi_resiko})]})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2 text-sm text-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:a.kehamilan?.user?.name||"Tidak ada data"})]})})]}),e.jsx("div",{className:"flex flex-col gap-2 sm:items-end",children:e.jsx(h,{variant:"outline",size:"sm",onClick:()=>B(a.id),className:"shrink-0",children:p.has(a.id)?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Tutup Detail"]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]})})})]}),p.has(a.id)&&e.jsxs("div",{className:"mt-4 rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-base font-semibold text-gray-800",children:"Detail Pemeriksaan"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Tekanan Darah"}),e.jsxs("p",{className:"text-gray-600",children:[a.tekanan_darah_sistolik,"/",a.tekanan_darah_diastolik," ","mmHg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Berat Badan"}),e.jsxs("p",{className:"text-gray-600",children:[a.berat_badan," kg"]})]}),a.tinggi_fundus&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Tinggi Fundus"}),e.jsxs("p",{className:"text-gray-600",children:[a.tinggi_fundus," cm"]})]}),a.lila&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"LILA"}),e.jsxs("p",{className:"text-gray-600",children:[a.lila," cm"]})]}),a.status_bengkak_kaki&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Status Bengkak Kaki"}),e.jsx(x,{className:R(a.status_bengkak_kaki),children:a.status_bengkak_kaki})]}),a.suhu_tubuh_celsius&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Suhu Tubuh"}),e.jsxs("p",{className:"text-gray-600",children:[a.suhu_tubuh_celsius,"Â°C"]})]})]}),a.hasilLab&&a.hasilLab.length>0&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-cyan-600"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["Hasil Laboratorium (",a.hasilLab.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:a.hasilLab.map(s=>{const t=m=>{switch(m){case"Normal":return"bg-green-100 text-green-700 border-green-200";case"Kurang Normal":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Tidak Normal":return"bg-red-100 text-red-700 border-red-200";case"Perlu Tindak Lanjut":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return e.jsxs("div",{className:"rounded-lg border border-cyan-200 bg-cyan-50 p-4",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-start justify-between gap-2",children:[e.jsx("h4",{className:"flex-1 font-semibold text-cyan-900",children:s.nama_tes}),e.jsx(x,{className:`border ${t(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-cyan-700",children:"Hasil:"}),e.jsxs("span",{className:"text-base font-bold text-cyan-900",children:[s.hasil," ",s.satuan||""]})]}),e.jsxs("p",{className:"mt-2 text-xs text-cyan-600",children:["Dicatat:"," ",f(s.created_at)]})]},s.id)})})]}),a.media&&a.media.length>0&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["Media Pemeriksaan (",a.media.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-4",children:a.media.map(s=>{let t=s.file_url;t.includes("storage/")||(t="storage/"+t),t.startsWith("http")||(t=`${window.location.origin}/${t.replace(/^\/+/,"")}`),console.log("Original URL:",s.file_url),console.log("Fixed URL:",t);const m=/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t),A=/\.(mp4|webm|ogg|mov)$/i.test(t);return e.jsxs("div",{className:"group relative overflow-hidden rounded-lg border border-purple-200 bg-purple-50 transition-shadow hover:shadow-md",children:[m?e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[e.jsx("img",{src:t,alt:"Media pemeriksaan",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:e.jsxs(x,{className:"flex w-fit items-center gap-1 bg-white/90 text-xs text-purple-700",children:[e.jsx(L,{className:"h-3 w-3"}),"Foto"]})})]}):A?e.jsx("div",{className:"aspect-square",children:e.jsx("video",{src:t,controls:!0,className:"h-full w-full object-cover"})}):e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex aspect-square flex-col items-center justify-center p-4",children:[e.jsx(X,{className:"h-12 w-12 text-purple-600"}),e.jsx("p",{className:"mt-2 text-center text-xs text-purple-700",children:"Lihat File"})]}),e.jsx("p",{className:"p-2 text-xs text-gray-500",children:f(s.created_at)})]},s.id)})})]}),a.dataJanin&&a.dataJanin.length>0&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"mb-2 font-medium text-gray-900",children:"Data Janin"}),a.dataJanin.map((s,t)=>e.jsxs("div",{className:"mb-2 rounded-md bg-purple-50 p-3",children:[s.urutan_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Urutan Janin:"," ",s.urutan_janin]}),s.denyut_jantung_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Detak Jantung:"," ",s.denyut_jantung_janin," ","bpm"]}),s.posisi_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Posisi Janin:"," ",s.posisi_janin]}),s.taksiran_berat_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Taksiran Berat Janin:"," ",s.taksiran_berat_janin," ","gram"]}),s.taksiran_berat_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Panjang Janin:"," ",s.panjang_janin_cm," ","cm"]}),s.pergerakan_janin&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Pergerakan Janin:"," ",s.pergerakan_janin]})]},t))]}),a.catatan_petugas&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Catatan"}),e.jsx("p",{className:"mt-1 text-gray-600",children:a.catatan_petugas})]}),a.saran_kunjungan_berikutnya&&e.jsxs("div",{className:"mt-4 rounded-md bg-green-50 p-3",children:[e.jsx("p",{className:"font-medium text-green-900",children:"Kunjungan Berikutnya"}),e.jsx("p",{className:"text-green-700",children:c(a.saran_kunjungan_berikutnya)})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Terakhir diperbarui:"," ",f(a.updated_at)]})]})]})},a.id)),n.length===0&&e.jsx(o,{className:"bg-white shadow-sm",children:e.jsxs(g,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(T,{className:"mb-3 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Tidak ada data pemeriksaan"}),e.jsx("p",{className:"mt-1 text-gray-500",children:j?"Belum ada riwayat pemeriksaan yang sesuai dengan filter":"Belum ada riwayat pemeriksaan kehamilan"})]})})]}),!u&&C&&e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-3",children:[e.jsxs(h,{onClick:()=>v(!0),size:"lg",className:"min-w-[250px]",children:["Tampilkan Semua Data (",n.length," total)"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Menampilkan ",_.length," dari"," ",n.length," data"]})]}),u&&C&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs(h,{onClick:()=>v(!1),variant:"outline",size:"lg",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Tampilkan Lebih Sedikit"]})})]})};function Ce({user:l,checkupHistory:i}){return e.jsx(Z,{user:l,children:e.jsx(ee,{checkupHistory:i})})}export{Ce as default};
