import{r as x,u,j as e,H as y,c as m}from"./app-DrhzRvIy.js";import{C as N}from"./card-BxdFDOMR.js";import{B as h}from"./button-Baa4IBDi.js";import{H as v}from"./heart-pulse-D4pjNEoV.js";import{B as k}from"./baby-tvdAOYVp.js";import{P as w}from"./PasienLayout-CB0ShgZL.js";/* empty css            */import"./utils-BwwSleOz.js";import"./createLucideIcon-BUEv7Pr-.js";import"./Combination-CEJpoHbc.js";import"./index-Bqyu0GIE.js";import"./index-Grv0ZP4Q.js";import"./index-AsFwZY0m.js";import"./index-Db0ym_Eg.js";import"./chevron-down-DFboTuUg.js";import"./log-out-B481QPQf.js";function K({keluarga:t,allAnggota:n}){const[d,i]=x.useState(!t),[o,c]=x.useState("create"),r=u({family_name:""}),l=u({family_code:""}),p=s=>{s.preventDefault(),r.post(route("pasien.createKeluarga"),{onSuccess:()=>{r.reset(),i(!1)}})},b=s=>{s.preventDefault(),l.post(route("pasien.joinKeluarga"),{onSuccess:()=>{l.reset(),i(!1)},onError:a=>{console.error(a)}})},g=()=>{confirm("Apakah Anda yakin ingin keluar dari keluarga ini?")&&m.post(route("keluarga.leave"))},f=s=>{m.visit(route("pasien.view.perkembanganKehamilan",{id:s}))},j=s=>{m.visit(route("pasien.view.perkembanganAnak",{id:s}))};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Keluarga"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Keluarga Saya"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Kelola informasi keluarga Anda"})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:t.family_name}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:t.family_code})]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Kode keluarga: ",e.jsx("span",{className:"font-mono font-semibold",children:t.family_code})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Dibuat pada: ",new Date(t.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Anggota Keluarga (",n?.length||0,")"]}),e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.map(s=>e.jsxs(N,{className:"p-5 border border-gray-100 hover:border-blue-200 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center text-lg font-semibold",children:s.user?.name?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:s.user?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?.email})]})]}),s.user_id===t.created_by&&e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded text-xs font-medium",children:"Pembuat"})]}),s.user?.kehamilan&&s.user.kehamilan.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-pink-50 border border-pink-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{className:"w-4 h-4 text-pink-700"}),e.jsxs("h4",{className:"text-sm font-semibold text-pink-800",children:["Data Kehamilan (",s.user.kehamilan.length,")"]})]}),s.user.kehamilan.map(a=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Kehamilan ke-",a.kehamilan_ke," • Status:"," ",e.jsx("span",{className:"font-medium",children:a.status})]}),e.jsx(h,{size:"sm",onClick:()=>f(a.id),className:"bg-pink-600 hover:bg-pink-700 text-white text-xs bg-blue-600 hover:bg-blue-700 text-white text-xs",children:"Lihat Grafik Kehamilan"})]},a.id))]}),s.user?.anak&&s.user.anak.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4 text-blue-700"}),e.jsxs("h4",{className:"text-sm font-semibold text-blue-800",children:["Data Anak (",s.user.anak.length,")"]})]}),s.user.anak.map(a=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[a.nama," • Lahir: ",a.tanggal_lahir," (",e.jsx("span",{className:"text-gray-500",children:a.kondisi}),")"]}),e.jsx(h,{size:"sm",onClick:()=>j(a.id),className:"bg-blue-600 hover:bg-blue-700 text-white text-xs",children:"Lihat Grafik Anak"})]},a.id))]})]},s.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Belum ada anggota keluarga yang terdaftar."})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:g,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Keluar dari Keluarga"})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Anda belum tergabung dalam keluarga manapun"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>{c("create"),i(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Buat Keluarga"}),e.jsx("button",{onClick:()=>{c("join"),i(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Gabung Keluarga"})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o==="create"?"Buat Keluarga":"Gabung Keluarga"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o==="create"?e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Nama Keluarga"}),e.jsx("input",{type:"text",value:r.data.family_name,onChange:s=>r.setData("family_name",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: Keluarga Budi",required:!0}),r.errors.family_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.family_name})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:r.processing,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:r.processing?"Memproses...":"Buat"})]})]}):e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Kode Keluarga"}),e.jsx("input",{type:"text",value:l.data.family_code,onChange:s=>l.setData("family_code",s.target.value.toUpperCase()),className:"w-full px-4 py-2 border border-gray-300 rounded-lg font-mono focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"FAM-XXXXXX",required:!0}),l.errors.family_code&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.errors.family_code})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:l.processing,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:l.processing?"Memproses...":"Gabung"})]})]}),!t&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>c(o==="create"?"join":"create"),className:"text-sm text-blue-600 hover:text-blue-700",children:o==="create"?"Sudah punya kode? Gabung keluarga":"Belum punya keluarga? Buat keluarga baru"})})]})})]})}function U({keluarga:t,allAnggota:n,user:d}){return e.jsx(w,{currentPage:"keluarga",user:d,children:e.jsx(K,{keluarga:t,allAnggota:n})})}export{U as default};
