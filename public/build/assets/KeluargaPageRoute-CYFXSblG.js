import{r as x,u,j as e,H as y,c as m}from"./app-DVAV-TGf.js";import{B as h}from"./button-4R4MV2AX.js";import{C as N}from"./card-Db6LBYBq.js";import{H as v}from"./heart-pulse-BAflLlqZ.js";import{B as k}from"./baby-DNCMkba5.js";import{P as w}from"./PasienLayout-D-jx2b2H.js";/* empty css            */import"./utils-gt38yA7v.js";import"./createLucideIcon-CXjRWg5O.js";import"./Combination-DFkMMEeZ.js";import"./index-DeXj-Kjv.js";import"./index-BBFquk-Z.js";import"./index-J8ZRWZZ7.js";import"./index-BHOJKC-J.js";import"./chevron-down-BPqhxQSe.js";import"./users-DrlGv5kU.js";import"./log-out-BeM1kc6d.js";function K({keluarga:r,allAnggota:n}){const[d,i]=x.useState(!r),[o,c]=x.useState("create"),t=u({family_name:""}),l=u({family_code:""}),p=s=>{s.preventDefault(),t.post(route("pasien.createKeluarga"),{onSuccess:()=>{t.reset(),i(!1)}})},b=s=>{s.preventDefault(),l.post(route("pasien.joinKeluarga"),{onSuccess:()=>{l.reset(),i(!1)},onError:a=>{console.error(a)}})},g=()=>{confirm("Apakah Anda yakin ingin keluar dari keluarga ini?")&&m.post(route("keluarga.leave"))},f=s=>{m.visit(route("pasien.view.perkembanganKehamilan",{id:s}))},j=s=>{m.visit(route("pasien.view.perkembanganAnak",{id:s}))};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Keluarga"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Keluarga Saya"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Kelola informasi keluarga Anda"})]}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:r.family_name}),e.jsx("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-sm font-medium text-blue-800",children:r.family_code})]}),e.jsxs("p",{className:"mb-4 text-gray-600",children:["Kode keluarga:"," ",e.jsx("span",{className:"font-mono font-semibold",children:r.family_code})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Dibuat pada:"," ",new Date(r.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[e.jsxs("h3",{className:"mb-4 text-xl font-semibold text-gray-800",children:["Anggota Keluarga (",n?.length||0,")"]}),e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.map(s=>e.jsxs(N,{className:"border border-gray-100 p-5 transition hover:border-blue-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-500 text-lg font-semibold text-white",children:s.user?.name?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.user?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?.email})]})]}),s.user_id===r.created_by&&e.jsx("span",{className:"rounded bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Pembuat"})]}),s.user?.kehamilan&&s.user.kehamilan.length>0&&e.jsxs("div",{className:"mt-4 rounded-lg border border-pink-100 bg-pink-50 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-pink-700"}),e.jsxs("h4",{className:"text-sm font-semibold text-pink-800",children:["Data Kehamilan (",s.user.kehamilan.length,")"]})]}),s.user.kehamilan.map(a=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Kehamilan ke-",a.kehamilan_ke," ","• Status:"," ",e.jsx("span",{className:"font-medium",children:a.status})]}),e.jsx(h,{size:"sm",onClick:()=>f(a.id),className:"bg-blue-600 bg-pink-600 text-xs text-white hover:bg-blue-700 hover:bg-pink-700",children:"Lihat Grafik Kehamilan"})]},a.id))]}),s.user?.anak&&s.user.anak.length>0&&e.jsxs("div",{className:"mt-4 rounded-lg border border-blue-100 bg-blue-50 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-blue-700"}),e.jsxs("h4",{className:"text-sm font-semibold text-blue-800",children:["Data Anak (",s.user.anak.length,")"]})]}),s.user.anak.map(a=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[a.nama," ","• Lahir:"," ",a.tanggal_lahir," ","(",e.jsx("span",{className:"text-gray-500",children:a.kondisi}),")"]}),e.jsx(h,{size:"sm",onClick:()=>j(a.id),className:"bg-blue-600 text-xs text-white hover:bg-blue-700",children:"Lihat Grafik Anak"})]},a.id))]})]},s.id)):e.jsx("p",{className:"py-4 text-center text-gray-500",children:"Belum ada anggota keluarga yang terdaftar."})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:g,className:"rounded-lg bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700",children:"Keluar dari Keluarga"})})]}):e.jsxs("div",{className:"rounded-lg bg-white p-8 text-center shadow-md",children:[e.jsx("p",{className:"mb-6 text-gray-600",children:"Anda belum tergabung dalam keluarga manapun"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>{c("create"),i(!0)},className:"rounded-lg bg-blue-600 px-6 py-3 text-white transition-colors hover:bg-blue-700",children:"Buat Keluarga"}),e.jsx("button",{onClick:()=>{c("join"),i(!0)},className:"rounded-lg bg-green-600 px-6 py-3 text-white transition-colors hover:bg-green-700",children:"Gabung Keluarga"})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o==="create"?"Buat Keluarga":"Gabung Keluarga"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o==="create"?e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block font-medium text-gray-700",children:"Nama Keluarga"}),e.jsx("input",{type:"text",value:t.data.family_name,onChange:s=>t.setData("family_name",s.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",placeholder:"Contoh: Keluarga Budi",required:!0}),t.errors.family_name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.family_name})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:t.processing,className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:t.processing?"Memproses...":"Buat"})]})]}):e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block font-medium text-gray-700",children:"Kode Keluarga"}),e.jsx("input",{type:"text",value:l.data.family_code,onChange:s=>l.setData("family_code",s.target.value.toUpperCase()),className:"w-full rounded-lg border border-gray-300 px-4 py-2 font-mono focus:border-transparent focus:ring-2 focus:ring-green-500",placeholder:"FAM-XXXXXX",required:!0}),l.errors.family_code&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.errors.family_code})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:l.processing,className:"flex-1 rounded-lg bg-green-600 px-4 py-2 text-white transition-colors hover:bg-green-700 disabled:opacity-50",children:l.processing?"Memproses...":"Gabung"})]})]}),!r&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>c(o==="create"?"join":"create"),className:"text-sm text-blue-600 hover:text-blue-700",children:o==="create"?"Sudah punya kode? Gabung keluarga":"Belum punya keluarga? Buat keluarga baru"})})]})})]})}function q({keluarga:r,allAnggota:n,user:d}){return e.jsx(w,{currentPage:"keluarga",user:d,children:e.jsx(K,{keluarga:r,allAnggota:n})})}export{q as default};
