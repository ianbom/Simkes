import{r as n,j as e,L as H}from"./app-DrhzRvIy.js";import{B as b}from"./badge-BwcORycy.js";import{B as o}from"./button-Baa4IBDi.js";import{C as u,b as V,c as A,a as h}from"./card-BxdFDOMR.js";import{I as E}from"./input-sECjRrHi.js";import{S as N,a as v,b as w,c as k,d as l,C as J}from"./select-PVOd6GPt.js";import{A as O}from"./activity-DHoa89Fo.js";import{S as Q,R as U}from"./sliders-horizontal-DZMVrg7O.js";import{C as W}from"./calendar-K9FtiVHV.js";import{C as $}from"./clock-Dh3n8FaP.js";import{C as q}from"./chevron-down-DFboTuUg.js";import{V as C}from"./utils-BwwSleOz.js";import{P as G}from"./PasienLayout-CB0ShgZL.js";/* empty css            */import"./index-Bqyu0GIE.js";import"./index-BdQq_4o_.js";import"./Combination-CEJpoHbc.js";import"./index-Grv0ZP4Q.js";import"./createLucideIcon-BUEv7Pr-.js";import"./index-AsFwZY0m.js";import"./index-Db0ym_Eg.js";import"./heart-pulse-D4pjNEoV.js";import"./baby-tvdAOYVp.js";import"./log-out-B481QPQf.js";const X=({consultations:c})=>{const[i,p]=n.useState(""),[r,g]=n.useState("all"),[d,j]=n.useState("all"),[m,S]=n.useState(new Set),x=n.useMemo(()=>c.map(s=>{const t=new Date(s.waktu_mulai_dijadwalkan);let a="scheduled";return s.status_sesi==="Selesai"?a="completed":s.status_sesi==="Dibatalkan"?a="cancelled":s.status_sesi==="Tidak Hadir"&&(a="no-show"),{id:s.id,date:s.waktu_mulai_dijadwalkan,time:t.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),duration:s.durasi_menit,doctor:s.petugas?.name||"Dokter Tidak Diketahui",specialty:s.petugas?.faskes?.tipe_faskes||"Umum",consultation_type:"video",status:a,complaint:"Konsultasi Kesehatan",diagnosis:s.ringkasan_konsultasi||"-",prescription:void 0,notes:s.rekomendasi_petugas||"Tidak ada catatan tambahan",payment_status:"paid",rating:a==="completed"?5:void 0,updated_at:s.updated_at}}),[c]),f=n.useMemo(()=>x.filter(s=>{const t=r==="all"?!0:s.status===r,a=d==="all"?!0:s.consultation_type===d,z=(s.doctor+s.specialty+s.diagnosis+s.complaint).toLowerCase().includes(i.toLowerCase());return t&&a&&z}),[x,r,d,i]),D=()=>{p(""),g("all"),j("all")},_=s=>{const t=new Set(m);t.has(s)?t.delete(s):t.add(s),S(t)},y=i.trim()||r!=="all"||d!=="all",L=s=>{switch(s){case"completed":return"bg-green-100 text-green-700 hover:bg-green-100";case"cancelled":return"bg-red-100 text-red-700 hover:bg-red-100";case"no-show":return"bg-gray-100 text-gray-700 hover:bg-gray-100";case"scheduled":return"bg-blue-100 text-blue-700 hover:bg-blue-100";default:return"bg-blue-100 text-blue-700 hover:bg-blue-100"}},T=s=>{switch(s){case"completed":return"Selesai";case"cancelled":return"Dibatalkan";case"no-show":return"Tidak Hadir";case"scheduled":return"Dijadwalkan";default:return s}},F=s=>{switch(s){case"paid":return"bg-emerald-100 text-emerald-700";case"pending":return"bg-yellow-100 text-yellow-700";case"refunded":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},M=s=>{switch(s){case"paid":return"Lunas";case"pending":return"Menunggu";case"refunded":return"Dikembalikan";default:return s}},B=s=>s==="video"?e.jsx(C,{className:"h-4 w-4"}):e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),I=s=>s==="video"?"Video Call":"Chat",K=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),R=s=>new Date(s).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=s=>s?e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((t,a)=>e.jsx("svg",{className:`h-4 w-4 ${a<s?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200"}`,viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.122-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.756 4.635 1.122 6.545z"})},a)),e.jsxs("span",{className:"ml-1 text-sm text-gray-600",children:["(",s,"/5)"]})]}):null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-50 p-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold text-gray-900 sm:text-3xl",children:"Riwayat Konsultasi Online"}),e.jsx("p",{className:"text-gray-600",children:"Catatan lengkap konsultasi kesehatan Anda"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md bg-purple-100 px-3 py-1 text-sm font-semibold text-purple-800",children:[e.jsx(O,{className:"h-4 w-4 text-purple-600"}),"Total Konsultasi: ",x.length]})})]}),e.jsxs(u,{className:"mb-6 bg-white shadow-sm",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{className:"flex items-center justify-between gap-4 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{size:20,className:"mr-2 text-blue-600"}),"Filter Konsultasi"]}),y&&e.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-1 text-xs text-emerald-600",children:"Aktif"})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:D,disabled:!y,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Reset Filter"]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status Konsultasi"}),e.jsxs(N,{value:r,onValueChange:g,children:[e.jsx(v,{children:e.jsx(w,{placeholder:"Semua Status"})}),e.jsxs(k,{className:"bg-white",children:[e.jsx(l,{value:"all",children:"Semua Status"}),e.jsx(l,{value:"completed",children:"Selesai"}),e.jsx(l,{value:"scheduled",children:"Dijadwalkan"}),e.jsx(l,{value:"cancelled",children:"Dibatalkan"}),e.jsx(l,{value:"no-show",children:"Tidak Hadir"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Jenis Konsultasi"}),e.jsxs(N,{value:d,onValueChange:j,children:[e.jsx(v,{children:e.jsx(w,{placeholder:"Semua Jenis"})}),e.jsxs(k,{className:"bg-white",children:[e.jsx(l,{value:"all",children:"Semua Jenis"}),e.jsx(l,{value:"video",children:"Video Call"}),e.jsx(l,{value:"chat",children:"Chat"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Pencarian"}),e.jsx(E,{type:"text",placeholder:"Cari dokter, spesialisasi...",value:i,onChange:s=>p(s.target.value)})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[f.map(s=>e.jsx(u,{className:"bg-white shadow-sm transition-shadow hover:shadow-md",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(b,{className:L(s.status),children:T(s.status)}),e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700",children:[B(s.consultation_type),I(s.consultation_type)]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(W,{className:"h-4 w-4"}),K(s.date)," â€¢"," ",s.time]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold text-gray-900",children:s.doctor}),e.jsx("p",{className:"text-sm text-blue-600",children:s.specialty}),e.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Keluhan:"})," ",s.complaint]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-700",children:[s.duration>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[s.duration," menit"]})]}),e.jsx(b,{className:F(s.payment_status),children:M(s.payment_status)})]}),s.rating&&s.status==="completed"&&e.jsx("div",{children:P(s.rating)})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[e.jsx(H,{href:route("pasien.consult.joinMeet",s.id),children:e.jsx(o,{variant:"default",className:"text-white",size:"sm",children:"Join Meet"})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>_(s.id),className:"shrink-0",children:m.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Tutup Detail"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]})})]})]}),m.has(s.id)&&e.jsxs("div",{className:"mt-4 rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-base font-semibold text-gray-800",children:"Detail Konsultasi"}),s.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Diagnosis"}),e.jsx("p",{className:"text-gray-600",children:s.diagnosis})]}),s.prescription&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Resep Obat"}),e.jsx("p",{className:"text-gray-600",children:s.prescription})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Catatan"}),e.jsx("p",{className:"mt-1 text-gray-600",children:s.notes})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Terakhir diperbarui:"," ",R(s.updated_at)]})]})]})},s.id)),f.length===0&&e.jsx(u,{className:"shadow-sm",children:e.jsxs(h,{className:"flex flex-col items-center py-12 text-center",children:[e.jsx(C,{className:"mb-3 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Tidak ada data konsultasi"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Belum ada riwayat konsultasi yang sesuai dengan filter"})]})})]})]})})};function ve({user:c,consultations:i}){return e.jsx(G,{currentPage:"dashboard",user:c,children:e.jsx(X,{consultations:i})})}export{ve as default};
